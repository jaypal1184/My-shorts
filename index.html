<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MY SHORTS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', Arial, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
            color: #030303;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            background-color: white;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo-my {
            background-color: #ff0000;
            color: white;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 18px;
            margin-right: 2px;
        }
        
        .logo-shorts {
            font-weight: bold;
            font-size: 18px;
            color: black;
        }
        
        .search-bar {
            display: flex;
            align-items: center;
            width: 40%;
            max-width: 600px;
        }
        
        .search-bar input {
            width: 100%;
            padding: 0.5rem 1rem;
            border: 1px solid #ccc;
            border-radius: 20px 0 0 20px;
            font-size: 1rem;
            outline: none;
        }
        
        .search-btn {
            background-color: #f8f8f8;
            border: 1px solid #ccc;
            border-left: none;
            border-radius: 0 20px 20px 0;
            padding: 0.5rem 1.25rem;
            cursor: pointer;
        }
        
        .icons-container {
            display: flex;
            align-items: center;
        }
        
        .header-icon {
            margin-left: 1.5rem;
            cursor: pointer;
            position: relative;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #cc0000;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 60px;
            bottom: 0;
            width: 240px;
            background-color: white;
            padding: 1rem 0;
            overflow-y: auto;
        }
        
        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            cursor: pointer;
        }
        
        .sidebar-item:hover {
            background-color: #f2f2f2;
        }
        
        .sidebar-item.active {
            background-color: #e5e5e5;
            font-weight: 500;
        }
        
        .sidebar-icon {
            margin-right: 1rem;
            color: #606060;
        }
        
        .sidebar-item.active .sidebar-icon {
            color: #ff0000;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 240px;
            padding-top: 20px;
        }
        
        /* Categories */
        .categories {
            display: flex;
            padding: 0.75rem 1.5rem;
            background-color: white;
            position: sticky;
            top: 60px;
            z-index: 90;
            overflow-x: auto;
            scrollbar-width: none;
        }
        
        .categories::-webkit-scrollbar {
            display: none;
        }
        
        .category {
            margin-right: 1rem;
            padding: 0.5rem 0.75rem;
            background-color: #f2f2f2;
            border-radius: 16px;
            white-space: nowrap;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        
        .category:hover {
            background-color: #e5e5e5;
        }
        
        .category.active {
            background-color: #030303;
            color: white;
        }
        
        /* Videos Grid */
        .videos-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            padding: 1.5rem;
        }
        
        .video-card {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .video-card:hover {
            transform: scale(1.02);
        }
        
        .thumbnail-container {
            position: relative;
            margin-bottom: 0.75rem;
        }
        
        .thumbnail {
            width: 100%;
            border-radius: 12px;
            aspect-ratio: 16/9;
            object-fit: cover;
        }
        
        .duration {
            position: absolute;
            bottom: 0.5rem;
            right: 0.5rem;
            background-color: rgba(0,0,0,0.8);
            color: white;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .video-info {
            display: flex;
        }
        
        .channel-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 0.75rem;
        }
        
        .video-details {
            flex: 1;
        }
        
        .video-title {
            font-weight: 500;
            margin-bottom: 0.3rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .channel-name {
            font-size: 0.9rem;
            color: #606060;
            margin-bottom: 0.2rem;
        }
        
        .video-stats {
            font-size: 0.9rem;
            color: #606060;
        }
        
        /* Video Popup */
        .video-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.9);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        .video-popup-content {
            width: 90%;
            max-width: 1000px;
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .popup-video {
            width: 100%;
            aspect-ratio: 16/9;
        }
        
        .popup-close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 2rem;
            cursor: pointer;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .search-bar {
                width: 50%;
            }
            
            .videos-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 576px) {
            .header {
                padding: 1rem;
            }
            
            .search-bar {
                display: none;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-container">
            <div class="logo">
                <div class="logo-my">MY</div>
                <div class="logo-shorts">SHORTS</div>
            </div>
        </div>
        
        <div class="search-bar">
            <input type="text" placeholder="Search" id="searchInput">
            <button class="search-btn" id="searchBtn">
                <span class="material-icons">search</span>
            </button>
        </div>
        
        <div class="icons-container">
            <div class="header-icon">
                <span class="material-icons">video_call</span>
            </div>
            <div class="header-icon">
                <span class="material-icons">apps</span>
            </div>
            <div class="header-icon" id="notificationIcon">
                <span class="material-icons">notifications</span>
                <span class="notification-badge" id="notificationBadge">0</span>
            </div>
            <div class="header-icon">
                <img src="https://i.pravatar.cc/150?img=5" alt="User" class="user-avatar" id="userAvatar">
            </div>
        </div>
    </header>
    
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-item active" data-page="home">
            <span class="material-icons sidebar-icon">home</span>
            <span>Home</span>
        </div>
        <div class="sidebar-item" data-page="shorts">
            <span class="material-icons sidebar-icon">ondemand_video</span>
            <span>Shorts</span>
        </div>
        <div class="sidebar-item" data-page="subscriptions">
            <span class="material-icons sidebar-icon">subscriptions</span>
            <span>Subscriptions</span>
        </div>
        <div class="sidebar-item" data-page="you">
            <span class="material-icons sidebar-icon">video_library</span>
            <span>You</span>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Categories -->
        <div class="categories" id="categories">
            <div class="category active" data-category="all">All</div>
            <div class="category" data-category="motivational">Motivational</div>
            <div class="category" data-category="news">News</div>
            <div class="category" data-category="funny">Funny</div>
            <div class="category" data-category="music">Music</div>
            <div class="category" data-category="gym">Gym</div>
        </div>
        
        <!-- Videos Grid -->
        <div class="videos-container" id="videosContainer">
            <!-- Videos will be loaded from Firebase -->
        </div>
    </div>
    
    <!-- Video Popup -->
    <div class="video-popup" id="videoPopup">
        <span class="material-icons popup-close" id="popupClose">close</span>
        <div class="video-popup-content">
            <video controls class="popup-video" id="popupVideo">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>

    <script>
        // Firebase Configuration - REPLACE WITH YOUR CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyABCD1234...",
            authDomain: "my-shorts-app.firebaseapp.com",
            projectId: "my-shorts-app",
            storageBucket: "my-shorts-app.appspot.com",
            messagingSenderId: "1234567890",
            appId: "1:1234567890:web:abcdef1234567890"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // DOM Elements
        const videosContainer = document.getElementById('videosContainer');
        const videoPopup = document.getElementById('videoPopup');
        const popupVideo = document.getElementById('popupVideo');
        const popupClose = document.getElementById('popupClose');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const notificationIcon = document.getElementById('notificationIcon');
        const notificationBadge = document.getElementById('notificationBadge');
        const userAvatar = document.getElementById('userAvatar');
        const sidebarItems = document.querySelectorAll('.sidebar-item');
        const categories = document.querySelectorAll('.category');

        // App State
        let currentUser = null;
        let currentCategory = 'all';
        let videos = [];

        // Initialize App
        function initApp() {
            // Auth State Listener
            auth.onAuthStateChanged(user => {
                currentUser = user;
                updateUI();
                loadVideos();
                if (user) loadNotifications();
            });

            // Event Listeners
            popupClose.addEventListener('click', closeVideoPopup);
            searchBtn.addEventListener('click', handleSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleSearch();
            });
            notificationIcon.addEventListener('click', showNotifications);

            // Sidebar Navigation
            sidebarItems.forEach(item => {
                item.addEventListener('click', () => {
                    sidebarItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    // Here you would load different content based on the page
                    // For now we'll just show a message
                    alert(`Loading ${item.dataset.page} page...`);
                });
            });

            // Category Filter
            categories.forEach(category => {
                category.addEventListener('click', () => {
                    categories.forEach(c => c.classList.remove('active'));
                    category.classList.add('active');
                    currentCategory = category.dataset.category;
                    loadVideos();
                });
            });
        }

        // Update UI based on auth state
        function updateUI() {
            if (currentUser) {
                // Set user avatar
                if (currentUser.photoURL) {
                    userAvatar.src = currentUser.photoURL;
                } else {
                    // Default avatar with initial
                    const initial = currentUser.displayName ? currentUser.displayName.charAt(0).toUpperCase() : 'U';
                    userAvatar.src = `https://ui-avatars.com/api/?name=${initial}&background=random&color=fff`;
                }
            } else {
                // Default avatar when logged out
                userAvatar.src = "https://i.pravatar.cc/150?img=5";
            }
        }

        // Load Videos from Firestore
        function loadVideos() {
            let query = db.collection('videos')
                .orderBy('timestamp', 'desc')
                .limit(20);

            if (currentCategory !== 'all') {
                query = query.where('category', '==', currentCategory);
            }

            query.get().then(snapshot => {
                videosContainer.innerHTML = '';
                videos = [];
                snapshot.forEach(doc => {
                    const video = doc.data();
                    video.id = doc.id;
                    videos.push(video);
                    renderVideo(video);
                });
            }).catch(error => {
                console.error("Error loading videos:", error);
            });
        }

        // Render Video Card
        function renderVideo(video) {
            const videoElement = document.createElement('div');
            videoElement.className = 'video-card';
            videoElement.dataset.videoId = video.id;
            
            videoElement.innerHTML = `
                <div class="thumbnail-container">
                    <img src="${video.thumbnail}" alt="Thumbnail" class="thumbnail">
                    <span class="duration">${formatDuration(video.duration)}</span>
                </div>
                <div class="video-info">
                    <img src="${video.channelAvatar}" alt="Channel" class="channel-avatar">
                    <div class="video-details">
                        <div class="video-title">${video.title}</div>
                        <div class="channel-name">${video.channelName}</div>
                        <div class="video-stats">${formatNumber(video.views)} views • ${formatTimeAgo(video.timestamp)}</div>
                    </div>
                </div>
            `;
            
            videoElement.addEventListener('click', () => {
                playVideo(video);
            });
            
            videosContainer.appendChild(videoElement);
        }

        // Play Video in Popup
        function playVideo(video) {
            popupVideo.src = video.videoUrl;
            videoPopup.style.display = 'flex';
            popupVideo.play();
            
            // Increment view count
            db.collection('videos').doc(video.id).update({
                views: firebase.firestore.FieldValue.increment(1)
            });
        }

        // Close Video Popup
        function closeVideoPopup() {
            popupVideo.pause();
            videoPopup.style.display = 'none';
        }

        // Handle Search
        function handleSearch() {
            const query = searchInput.value.trim();
            if (query) {
                // In a real app, you would implement actual search functionality
                alert(`Searching for: ${query}`);
            }
        }

        // Load Notifications
        function loadNotifications() {
            db.collection('notifications')
                .where('userId', '==', currentUser.uid)
                .where('read', '==', false)
                .onSnapshot(snapshot => {
                    const count = snapshot.size;
                    notificationBadge.textContent = count;
                    notificationBadge.style.display = count > 0 ? 'flex' : 'none';
                });
        }

        // Show Notifications
        function showNotifications() {
            if (currentUser) {
                alert("Showing your notifications");
                // Mark notifications as read
                db.collection('notifications')
                    .where('userId', '==', currentUser.uid)
                    .where('read', '==', false)
                    .get()
                    .then(snapshot => {
                        const batch = db.batch();
                        snapshot.forEach(doc => {
                            batch.update(doc.ref, { read: true });
                        });
                        return batch.commit();
                    });
            } else {
                alert("Please sign in to view notifications");
            }
        }

        // Helper Functions
        function formatDuration(seconds) {
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = Math.floor(seconds % 60);
            
            return h > 0 
                ? `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`
                : `${m}:${s.toString().padStart(2, '0')}`;
        }

        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        function formatTimeAgo(timestamp) {
            const seconds = Math.floor((new Date() - timestamp.toDate()) / 1000);
            
            let interval = Math.floor(seconds / 31536000);
            if (interval >= 1) return interval + " year" + (interval === 1 ? "" : "s") + " ago";
            
            interval = Math.floor(seconds / 2592000);
            if (interval >= 1) return interval + " month" + (interval === 1 ? "" : "s") + " ago";
            
            interval = Math.floor(seconds / 86400);
            if (interval >= 1) return interval + " day" + (interval === 1 ? "" : "s") + " ago";
            
            interval = Math.floor(seconds / 3600);
            if (interval >= 1) return interval + " hour" + (interval === 1 ? "" : "s") + " ago";
            
            interval = Math.floor(seconds / 60);
            if (interval >= 1) return interval + " minute" + (interval === 1 ? "" : "s") + " ago";
            
            return Math.floor(seconds) + " second" + (seconds === 1 ? "" : "s") + " ago";
        }

        // Initialize the app
        initApp();
    </script>
</body>
  </html>
